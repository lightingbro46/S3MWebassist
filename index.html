<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
    <!-- import CSS -->
    <link rel="stylesheet" href="./assets/elementui/index.css">
    <!-- import JS -->
    <script src="./js/utils.js"></script>
</head>

<body>
    <div id="app">
        <el-container>
            <el-header>
                <el-row>
                    <el-col :xs="23" :sm="23" :md="23" :lg="23" :xl="23">
                        <el-menu :default-active="selectIndex" class="el-menu-demo" mode="horizontal"
                            @select="handleSelect" background-color="#545c64" text-color="#fff"
                            active-text-color="#ffd04b">
                            <el-menu-item index="1" disable> <template slot="title">
                                    <el-image style="height: 100%" src="./assets/logo.png" fit="fill"></el-image>
                                </template>
                            </el-menu-item>
                            <el-menu-item index="2">WebRTC Testing</el-menu-item>
                            <el-menu-item index="3">StreamPullAgent</el-menu-item>
                            <el-menu-item index="4">PushStreamAgent</el-menu-item>
                            <el-menu-item index="5">FFmpegPush-Pull</el-menu-item>
                            <el-menu-item index="6">RtpService</el-menu-item>
                            <el-menu-item index="7">ServerConfiguration</el-menu-item>
                        </el-menu>
                    </el-col>
                    <el-col :xs="1" :sm="1" :md="1" :lg="1" :xl="1" v-show="selectIndex==='7'">
                        <el-popconfirm confirm-button-text='OK' cancel-button-text='No' icon="el-icon-info"
                            icon-color="red" title="This can only be restarted in Daemon mode, otherwise it will be closed directly! Are you sure to restart?" @confirm="restartServer">
                            <el-button type="danger" plain slot="reference" icon="el-icon-refresh-right">Restart</el-button>
                        </el-popconfirm>
                    </el-col>
                </el-row>

            </el-header>
            <el-main>
                <div v-show="selectIndex==='1'">
                    <el-row :gutter="20">
                        <el-col :xs="24" :sm="24" :md="12" :lg="8" :xl="8">
                            <div style="height: 300px; background-color: whitesmoke; border-radius: 20px;">
                                <div style="height: 100%; width: 100%;" ref="chart1">

                                </div>
                            </div>
                        </el-col>
                        <el-col :xs="24" :sm="24" :md="12" :lg="8" :xl="8">
                            <div style="height: 300px; background-color: whitesmoke; border-radius: 20px;">
                                <div style="height: 100%; width: 100%;" ref="chart2">

                                </div>
                            </div>
                        </el-col>
                        <el-col :xs="24" :sm="24" :md="12" :lg="8" :xl="8">
                            <div style="height: 300px;  background-color: whitesmoke;border-radius: 20px;">
                                <div style="height: 100%; width: 100%;" ref="chart3">

                                </div>
                            </div>
                        </el-col>
                    </el-row>
                    <el-divider><i class="el-icon-s-data"></i></el-divider>
                    <div style="width: 100%;text-align: right;">
                        <el-checkbox label="AutoRefresh" v-model="autorefresh_medialist" ></el-checkbox>
                        <el-button type="primary" icon="el-icon-refresh" @click="getMediaList">Refresh</el-button>
                    </div>

                    <el-table :data="medialist" empty-text="No data">
                        <!-- <el-table-column prop="vhost" label="Host"> </el-table-column> -->
                        <el-table-column sortable prop="app" label="AppName"> </el-table-column>
                        <el-table-column prop="stream" label="StreamID"> </el-table-column>
                        <el-table-column sortable prop="schema" label="Protocol" :filters="schemaFilters" :filter-method="filterSchema"> </el-table-column>
                        <el-table-column prop="createStamp" label="CreateAt">
                            <template #default="scope">
                                {{scope.row.createStamp | secFormat}}
                            </template>
                        </el-table-column>
                        <el-table-column prop="aliveSecond" label="Duration(s)">
                        </el-table-column>
                        <el-table-column prop="bytesSpeed" label="Bitrate">
                            <template #default="scope">
                                {{scope.row.bytesSpeed | bitsSpeed}}/s
                            </template>
                        </el-table-column>
                        <el-table-column label="RecordIn"> 
                            <template #default="scope">
                                <el-tag v-if="scope.row.isRecordingHLS">HLS</el-tag>
                                <el-tag v-if="scope.row.isRecordingMP4">MP4</el-tag>
                            </template>
                        </el-table-column>
<!--                         
                        <el-table-column prop="isRecordingHLS" label="Record in HLS">
                            <template #default="scope">
                                <el-tag v-if="scope.row.isRecordingHLS" type="success" effect="dark">yes</el-tag>
                                <el-tag v-else type="danger" effect="dark">no</el-tag>
                            </template>
                        </el-table-column>
                        <el-table-column prop="isRecordingMP4" label="Record in MP4">
                            <template #default="scope">
                                <el-tag v-if="scope.row.isRecordingMP4" type="success" effect="dark">yes</el-tag>
                                <el-tag v-else type="danger" effect="dark">no</el-tag>
                            </template>
                        </el-table-column>
                        <el-table-column prop="originType" label="Source Type">
                            <template #default="scope">
                                <el-tag v-if="scope.row.originType==0">unknown</el-tag>
                                <el-tag v-else-if="scope.row.originType==1">rtmp_push</el-tag>
                                <el-tag v-else-if="scope.row.originType==2">rtsp_push</el-tag>
                                <el-tag v-else-if="scope.row.originType==3">rtp_push</el-tag>
                                <el-tag v-else-if="scope.row.originType==4">pull</el-tag>
                                <el-tag v-else-if="scope.row.originType==5">ffmpeg_pull</el-tag>
                                <el-tag v-else-if="scope.row.originType==6">mp4_Generate on demand</el-tag>
                                <el-tag v-else-if="scope.row.originType==7">device_chn</el-tag>
                                <el-tag v-else-if="scope.row.originType==8">rtc_push</el-tag>
                            </template>
                        </el-table-column>
-->
                        <el-table-column prop="originTypeStr" label="SrcType"> </el-table-column>
                        <el-table-column prop="originUrl" label="SrcAddress"> </el-table-column>
                        <!-- 
                        <el-table-column prop="readerCount" label="Number of viewers"> </el-table-column>
                        <el-table-column sortable prop="totalReaderCount" label="Total number of viewers"> </el-table-column>
                        -->
                        <el-table-column sortable prop="totalReaderCount" label="Viewers">
                            <template slot-scope="scope">
                                <el-button @click="getPlayerList(scope.row)">{{scope.row.readerCount}}/{{scope.row.totalReaderCount}}</el-button>
                            </template>
                        </el-table-column>
                        <el-table-column label="Network information">
                            <el-table-column prop="originSock.identifier" label="id"> </el-table-column>
                            <el-table-column label="LocalIp">
                                <template slot-scope="scope">{{scope.row.originSock.local_ip}}:{{scope.row.originSock.local_port}}</template>
                            </el-table-column>
                            <el-table-column label="PeerIp">
                                <template slot-scope="scope">{{scope.row.originSock.peer_ip}}:{{scope.row.originSock.peer_port}}</template>
                            </el-table-column>                            
                            <!-- 
                            <el-table-column prop="originSock.local_ip" label="local ip"> </el-table-column>
                            <el-table-column prop="originSock.local_port" label="local port"> </el-table-column>
                            <el-table-column prop="originSock.peer_ip" label="peer ip"> </el-table-column>
                            <el-table-column prop="originSock.peer_port" label="peer port"> </el-table-column>
                            -->
                        </el-table-column>

                        <el-table-column type="expand" width=150 label="MediaTrack">
                            <template slot-scope="scope">
                                <el-table v-if="scope.row.tracks.length > 0" :data="scope.row.tracks">
                                    <!-- 
                                    <el-table-column prop="codec_type" label="Codec">
                                    </el-table-column>
                                    <el-table-column prop="codec_id" label="Codec ID">
                                    </el-table-column> 
                                    -->
                                    <el-table-column prop="codec_id_name" label="Codec">
                                        <template #default="scope">
                                            <el-tag type="success">{{ scope.row.codec_id_name}}</el-tag>
                                        </template>
                                    </el-table-column>
                                    <el-table-column prop="frames" label="Frames">
                                    </el-table-column>
                                    <el-table-column prop="duration" label="Duration(s)">
                                        <template #default="scope">{{ scope.row.duration/1000}}</template>
                                    </el-table-column>
                                    <el-table-column prop="ready" label="Ready">
                                        <template #default="scope">
                                            <el-tag v-if="scope.row.ready" type="success" effect="dark">yes</el-tag>
                                            <el-tag v-else type="danger" effect="dark">no</el-tag>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="CodecProps">
                                        <template #default="scope">
                                            <el-tag v-if="scope.row.codec_type==1">{{scope.row.channels}}x{{scope.row.sample_rate}}x{{scope.row.sample_bit}}</el-tag>
                                            <el-tag v-else>{{scope.row.width}}x{{scope.row.height}}@{{scope.row.fps}}</el-tag>
                                        </template>
                                    </el-table-column>
                                    <el-table-column prop="key_frames" label="KeyframeCount">
                                    </el-table-column>
                                    <el-table-column prop="gop_interval_ms" label="GOPInterval(s)">
                                    </el-table-column>
                                    <el-table-column prop="gop_size" label="GOP">
                                    </el-table-column>
                                </el-table>
                                <el-empty description="No tracks" v-else></el-empty>
                            </template>

                        </el-table-column>
                        <el-table-column label="Operate">
                            <template slot-scope="scope">
                                <el-button size="mini" type="danger"
                                    @click="close_stream(scope.$index, scope.row)">Close</el-button>
                            </template>
                        </el-table-column>
                    </el-table>

                    <el-dialog :title="playerTitle"
                        width="60%" top="2rem"
                        :close-on-click-modal="true"
                        :visible.sync="showPlayerDialog">
                        <div id="shared" style="margin-top: 1rem;">
                        <el-table :data="playerlist" empty-text="No player">
                            <el-table-column prop="identifier" label="id"></el-table-column>
                            <el-table-column prop="local_ip" label="NativeIP"></el-table-column>
                            <el-table-column prop="local_port" label="NativePort"></el-table-column>
                            <el-table-column prop="peer_ip" label="PeerIP"></el-table-column>
                            <el-table-column prop="peer_port" label="PeerPort"></el-table-column>
                            <el-table-column prop="typeid" label="Type"></el-table-column>
                            <el-table-column label="Operate">
                                <template slot-scope="scope">
                                    <el-button size="mini" type="danger"
                                        @click="kick_session(scope.row.identifier)">Disconnect</el-button>
                                </template>
                            </el-table-column>
                        </el-table>
                        </div>
                    </el-dialog>
                    <el-divider><i class="el-icon-connection"></i></el-divider>
                    <div style="width: 100%;text-align: right;">
                        <el-checkbox label="AutoRefresh" v-model="autorefresh_session" ></el-checkbox>
                        <el-button type="primary" icon="el-icon-refresh" @click="getAllSession">Refresh</el-button>
                    </div>

                    <el-table :data="sessionlist" empty-text="No connection data">
                        <el-table-column prop="id" label="id"></el-table-column>
                        <el-table-column prop="local_ip" label="NativeIP"></el-table-column>
                        <el-table-column prop="local_port" label="NativePort"></el-table-column>
                        <el-table-column prop="peer_ip" label="PeerIP"></el-table-column>
                        <el-table-column prop="peer_port" label="PeerPort"></el-table-column>
                        <el-table-column prop="typeid" label="Type"></el-table-column>
                        <el-table-column label="Operate">
                            <template slot-scope="scope">
                                <el-button size="mini" type="danger"
                                    @click="kick_session(scope.row.id)">Disconnect</el-button>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>
                <div v-show="selectIndex==='2'">
                    <el-row :gutter="20">
                        <el-col :span="24">
                            <el-row :gutter="10" style="height: 600px;display: flex; margin-bottom: 10px;">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <video ref='video' controls autoplay class="videobox">
                                        Your browser is too old which doesn't support HTML5 video.
                                    </video>
                                </el-col>
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <video ref='selfVideo' controls autoplay class="videobox">
                                        Your browser is too old which doesn't support HTML5 video.
                                    </video>
                                </el-col>
                            </el-row>
                        </el-col>
                        <el-col :span="12" :offset="6">
                            <el-form v-model="webrtc" label-width="160px">
                                <el-form-item label="Url">
                                    <el-input v-model="webrtc.zlmsdpUrl"></el-input>
                                </el-form-item>
                                <el-form-item label="">
                                    <el-checkbox label="Simulcast" v-model="webrtc.simulcast"></el-checkbox>
                                    <el-checkbox label="UseCamera" v-model="webrtc.useCamera"></el-checkbox>
                                    <el-checkbox label="AudioEnable" v-model="webrtc.audioEnable"></el-checkbox>
                                    <el-checkbox label="VideoEnable" v-model="webrtc.videoEnable"></el-checkbox>
                                </el-form-item>
                                <el-form-item label="Method">
                                    <el-radio-group v-model="webrtc.type">
                                        <el-radio label="echo"></el-radio>
                                        <el-radio label="push"></el-radio>
                                        <el-radio label="play"></el-radio>
                                    </el-radio-group>
                                </el-form-item>
                                <el-form-item label="Resolution">
                                    <el-select v-model="webrtc.resolution" placeholder="Please select resolution" @change="$forceUpdate()"
                                        style="width: 100%;">
                                        <el-option v-for="(opt,index) in resolution_opt" :key="index" :label="opt.text"
                                            :value="index"></el-option>
                                    </el-select>
                                </el-form-item>
                                <el-form-item label="Datachannel">
                                    <el-switch v-model="webrtc.usedatachannel"></el-switch>
                                </el-form-item>
                                <el-form-item label="DebugLog">
                                    <el-switch v-model="webrtc.debug"></el-switch>
                                </el-form-item>
                                <el-form-item>
                                    <el-button type="primary" @click="startwebrtc">Start</el-button>
                                    <el-button type="danger" @click="stopwebrtc">Stop</el-button>
                                </el-form-item>
                                <el-form-item label="msgrecv">
                                    <el-input type="textarea" v-model="webrtc.msgrecv"></el-input>
                                </el-form-item>
                                <el-form-item label="msgsend">
                                    <el-input type="text" v-model="webrtc.msgsend">
                                        <template slot="append">
                                            <el-button type="success" @click="sendata">Send data</el-button>
                                        </template>
                                    </el-input>
                                </el-form-item>
                                <el-form-item>
                                    <el-button type="info" @click="closedata">Close datachannel</el-button>
                                </el-form-item>
                            </el-form>
                        </el-col>
                    </el-row>
                </div>
                <div v-if="selectIndex==='3'" style="display: flex;">
                    <div style="border-radius: 4px; background-color: #545c6421;margin: 10px; flex:1">
                        <el-form style="margin: 10px;">
                            <!-- <el-form-item label="API key" label-width="180px">
                                <el-input v-model="secret" disabled></el-input>
                            </el-form-item> -->
                            <el-form-item label="VirtualHost" label-width="180px">
                                <el-input v-model="addStreamProxy_params.vhost"></el-input>
                            </el-form-item>
                            <el-form-item label="AppName" label-width="180px">
                                <el-input v-model="addStreamProxy_params.app"></el-input>
                            </el-form-item>
                            <el-form-item label="StreamID" label-width="180px">
                                <el-input v-model="addStreamProxy_params.stream"></el-input>
                            </el-form-item>
                            <el-form-item label="Pull source" label-width="180px">
                                <el-input v-model="addStreamProxy_params.url"
                                    placeholder="For example rtmp://live.hkstv.hk.lxdns.com/live/hks2"></el-input>
                            </el-form-item>
                            <el-form-item label="" label-width="180px">
                                <el-row style="text-align: left;">
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.enable_hls">Convert hls-mpeg</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.enable_hls_fmp4">Convert hls-fmp4</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.enable_mp4">Record in mp4 </el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.enable_rtsp">Convert rtsp</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.enable_rtmp">Convert rtmp/flv</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.enable_ts">Convert http-ts/ws-ts</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.enable_fmp4">Convert http-fmp4/ws-fmp4</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.hls_demand">Generate on demand hls</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.rtsp_demand">Generate on demand rtsp</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.rtmp_demand">Generate on demand rtmp</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.ts_demand">Generate on demand ts</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.fmp4_demand">Generate on demand fmp4</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.enable_audio">Allow audio</el-checkbox>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.add_mute_audio">Add mute tracks</el-checkbox>
                                    </el-col>
                                    <el-col :span="16">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.mp4_as_player">MP4 recording is used as the number of viewers participating in the playback count</el-checkbox>
                                    </el-col>
                                    <el-col :span="16">
                                        <el-checkbox
                                            v-model="addStreamProxy_params.auto_close">Automatically close stream without anyone watching(Non-one-watching hook is triggered)</el-checkbox>
                                    </el-col>
                                </el-row>
                            </el-form-item>
                            <el-form-item label="Pull method" label-width="180px">
                                <el-select v-model="addStreamProxy_params.rtp_type" style="width: 100%;">
                                    <el-option label="TCP" value="0"> </el-option>
                                    <el-option label="UDP" value="1"> </el-option>
                                    <el-option label="Multicast" value="2"> </el-option>
                                </el-select>
                            </el-form-item>
                            <el-form-item label="Timeout" label-width="180px">
                                <el-input v-model="addStreamProxy_params.timeout_sec"></el-input>
                            </el-form-item>
                            <el-form-item label="Retry times" label-width="180px">
                                <el-input v-model="addStreamProxy_params.retry_count" placeholder="Default is -1 Unlimited Retry"></el-input>
                            </el-form-item>
                            <el-form-item label="Timestamp overwrite" label-width="180px">
                                <el-select v-model="addStreamProxy_params.modify_stamp" style="width: 100%;">
                                    <el-option label="Not enabled" value=""> </el-option>
                                    <el-option label="Absolute timestamp" value="0"> </el-option>
                                    <el-option label="System Timestamp" value="1"> </el-option>
                                    <el-option label="Relative timestamp" value="2"> </el-option>
                                </el-select>
                            </el-form-item>
                            <el-form-item label="mp4 video save directory" label-width="180px">
                                <el-input v-model="addStreamProxy_params.mp4_save_path"
                                    placeholder="use default"></el-input>
                            </el-form-item>
                            <el-form-item label="mp4 slice size(s)" label-width="180px">
                                <el-input v-model="addStreamProxy_params.mp4_max_second"
                                    placeholder="mp4 video slice size(s)"></el-input>
                            </el-form-item>
                            <el-form-item label="hls file save directory" label-width="180px">
                                <el-input v-model="addStreamProxy_params.hls_save_path"
                                    placeholder="use default"></el-input>
                            </el-form-item>
                            <el-form-item label="">
                                <el-input type="textarea" :rows="5" v-model="apiurl" readonly></el-input>
                            </el-form-item>
                        </el-form>
                    </div>
                    <div style="border-radius: 4px; background-color: #545c6421;margin: 10px; flex:1">
                        <el-form style="margin: 10px;">
                            <div style="margin-bottom: 10px;width: 100%;text-align: left;">
                                <el-button type="primary" @click="addStreamProxy">Increase</el-button>
                                <el-button type="primary" icon="el-icon-refresh" @click="listStreamProxy">Refresh</el-button>
                            </div>
                            <el-table :data="streamProxyList" empty-text="No stream pull agent">
                                <!-- <el-table-column sortable prop="key" label="key"> </el-table-column> -->
                                <el-table-column sortable prop="url" label="Url"> </el-table-column>
                                <el-table-column sortable prop="src.app" label="App"> </el-table-column>
                                <el-table-column sortable prop="src.stream" label="Stream"> </el-table-column>
                                <el-table-column sortable prop="status" label="State"> </el-table-column>
                                <el-table-column sortable prop="liveSecs" label="Duration(s)"> </el-table-column>
                                <el-table-column sortable prop="rePullCount" label="Retry times"> </el-table-column>
                                <el-table-column sortable prop="totalReaderCount" label="Viewers"> </el-table-column>
                                <el-table-column label="Operate">
                                    <template slot-scope="scope">
                                        <el-button size="mini" type="danger"
                                            @click="delStreamProxy(scope.$index, scope.row)">Delete</el-button>
                                    </template>
                                </el-table-column>
                            </el-table>    
                        </el-form>
                    </div>
                </div>
                <div v-if="selectIndex==='4'">
                    <el-form>
                        <!-- <el-form-item label="API key" label-width="180px">
                            <el-input v-model="secret" disabled></el-input>
                        </el-form-item> -->
                        <el-form-item label="Virtual Host" label-width="180px">
                            <el-input v-model="addStreamPusherProxy_params.vhost"></el-input>
                        </el-form-item>
                        <el-form-item label="" label-width="180px">
                            <el-select v-model="addStreamPusherProxy_params.schema" style="width: 100%;">
                                <el-option label="RTSP" value="rtsp"> </el-option>
                                <el-option label="RTMP" value="rtmp"> </el-option>
                            </el-select>
                        </el-form-item>
                        <el-form-item label="AppName" label-width="180px">
                            <el-input v-model="addStreamPusherProxy_params.app"></el-input>
                        </el-form-item>
                        <el-form-item label="StreamID" label-width="180px">
                            <el-input v-model="addStreamPusherProxy_params.stream"></el-input>
                        </el-form-item>
                        <el-form-item label="Retweet address" label-width="180px">
                            <el-input v-model="addStreamPusherProxy_params.dst_url"
                                placeholder="For example rtmp://live.hkstv.hk.lxdns.com/live/hks2"></el-input>
                        </el-form-item>
                        <el-form-item label="Promotion method" label-width="180px">
                            <el-select v-model="addStreamPusherProxy_params.rtp_type" style="width: 100%;">
                                <el-option label="TCP" value="0"> </el-option>
                                <el-option label="UDP" value="1"> </el-option>
                            </el-select>
                        </el-form-item>
                        <el-form-item label="Timeout" label-width="180px">
                            <el-input v-model="addStreamPusherProxy_params.timeout_sec"></el-input>
                        </el-form-item>
                        <el-form-item label="Retry times" label-width="180px">
                            <el-input v-model="addStreamPusherProxy_params.retry_count"></el-input>
                        </el-form-item>
                        <el-form-item label="">
                            <!-- <el-input type="textarea" :rows="5" v-model="addStreamPusherProxy_apiurl" readonly></el-input> -->
                            <div style="width: 100%;text-align: right;">
                                <el-button type="primary" @click="addStreamPusherProxy">Increase</el-button>
                                <el-button type="primary" icon="el-icon-refresh" @click="listStreamPusherProxy">Refresh</el-button>
                            </div>
                        </el-form-item>
                    </el-form>
                    <el-table :data="pusherProxyList" empty-text="No push stream agent">
                        <!-- <el-table-column sortable prop="key" label="key"> </el-table-column> -->
                        <el-table-column sortable prop="url" label="Url"> </el-table-column>
                        <el-table-column sortable prop="src.app" label="App"> </el-table-column>
                        <el-table-column sortable prop="src.stream" label="stream"> </el-table-column>
                        <el-table-column sortable prop="status" label="State"> </el-table-column>
                        <el-table-column sortable prop="liveSecs" label="Duration(s)"> </el-table-column>
                        <el-table-column sortable prop="rePublishCount" label="Retry times"> </el-table-column>
                        <el-table-column label="Operate">
                            <template slot-scope="scope">
                                <el-button size="mini" type="danger"
                                    @click="delStreamPusherProxy(scope.$index, scope.row)">Delete</el-button>
                            </template>
                        </el-table-column>
                    </el-table>                
                </div>                
                <div v-show="selectIndex==='5'">
                    <el-form>
                        <el-form-item label="Source address" label-width="180px">
                            <el-input v-model="addFFmpeg_param.src_url"></el-input>
                        </el-form-item>
                        <el-form-item label="Destination address" label-width="180px">
                            <el-input v-model="addFFmpeg_param.dst_url"></el-input>
                        </el-form-item>
                        <el-form-item label="Command template" label-width="180px">
                            <el-input v-model="addFFmpeg_param.ffmpeg_cmd_key"></el-input>
                        </el-form-item>
                        <el-form-item label="" label-width="180px">
                            <el-checkbox v-model="addFFmpeg_param.enable_mp4">Record in MP4</el-checkbox>
                            <el-checkbox v-model="addFFmpeg_param.enable_hls">Record in HLS</el-checkbox>
                        </el-form-item>
                        <el-form-item label="Timeout ms" label-width="180px">
                            <el-input v-model="addFFmpeg_param.timeout_ms"></el-input>
                        </el-form-item>
                        <el-form-item label="">
                            <el-button type="primary" @click="addFFmpegSource">Increase</el-button>
                            <el-button type="primary" icon="el-icon-refresh" @click="listFFmpegSource">Refresh</el-button>
                        </el-form-item>
                    </el-form>
                    <el-table :data="ffmpeglist" empty-text="No data">
                        <el-table-column sortable prop="src_url" label="Source address"> </el-table-column>
                        <el-table-column sortable prop="dst_url" label="Destination address"> </el-table-column>
                        <el-table-column sortable prop="ffmpeg_cmd_key" label="Command template"></el-table-column>
                        <el-table-column sortable prop="cmd" label="Command line"> </el-table-column>
                        <el-table-column label="Operate">
                            <template slot-scope="scope">
                                <el-button size="mini" type="danger"
                                    @click="delFFmpegSource(scope.$index, scope.row)">Delete</el-button>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>
                <div v-show="selectIndex==='6'">
                    <el-form>
                        <el-form-item label="Virtual Host" label-width="180px">
                            <el-input v-model="addRtpServer_param.vhost"></el-input>
                        </el-form-item>
                        <el-form-item label="AppName" label-width="180px">
                            <el-input v-model="addRtpServer_param.app"></el-input>
                        </el-form-item>
                        <el-form-item label="StreamID" label-width="180px">
                            <el-input v-model="addRtpServer_param.stream_id"></el-input>
                        </el-form-item>
                        <el-form-item label="TCP mode" label-width="180px">
                            <el-select v-model="addRtpServer_param.tcp_mode" style="width: 100%;">
                                <el-option v-for="(val,key) in typeTcpMode" :label="val" :value="key"></el-option>
                            </el-select>
                        </el-form-item>
                        <el-form-item label="Flow filtering" label-width="180px">
                            <el-select v-model="addRtpServer_param.only_track" style="width: 100%;">
                                <el-option v-for="(val,key) in typeOnlyTrack" :label="val" :value="key"></el-option>
                            </el-select>                            
                        </el-form-item>
                        <el-form-item label="Local IP" label-width="180px">
                            <el-input v-model="addRtpServer_param.local_ip"></el-input>
                        </el-form-item>
                        <el-form-item label="Port" label-width="180px">
                            <el-input v-model="addRtpServer_param.port">
                                <template #append>
                                    <el-checkbox v-model="addRtpServer_param.re_use_port" label="Port reuse"/>                                    
                                </template>
                            </el-input>
                        </el-form-item>
                        <el-form-item label="SSRC" label-width="180px">
                            <el-input v-model="addRtpServer_param.ssrc"></el-input>
                        </el-form-item>
                        <el-form-item label="">
                            <el-button type="primary" @click="openRtpServer">Increase</el-button>
                            <el-button type="primary" icon="el-icon-refresh" @click="listRtpServer">Refresh</el-button>
                        </el-form-item>
                    </el-form>
                    <el-table :data="rtpserverlist" empty-text="No data">
                        <el-table-column sortable prop="vhost" label="vhost"> </el-table-column>
                        <el-table-column sortable prop="app" label="app"> </el-table-column>
                        <el-table-column sortable prop="stream_id" label="streamId"> </el-table-column>
                        <el-table-column sortable prop="port" label="port"></el-table-column>
                        <el-table-column sortable prop="tcp_mode" label="TCP mode">
                            <template slot-scope="scope">
                                {{typeTcpMode[scope.row.tcp_mode]}}
                            </template>
                        </el-table-column>
                        <el-table-column sortable prop="only_track" label="Flow filtering">
                            <template slot-scope="scope">
                                {{typeOnlyTrack[scope.row.only_track]}}
                            </template>
                        </el-table-column>
                        <el-table-column label="ssrc" width="160">
                            <template slot-scope="scope">
                                <el-input v-model="scope.row.ssrc" class="input-with-select">
                                    <template #append>
                                        <el-button icon="el-icon-refresh" @click="updateRtpServerSSRC(scope.row)"></el-button>
                                    </template>
                                </el-input>
                            </template>
                        </el-table-column>
                        <el-table-column prop="dst_url" label="Destination address" width="280">
                            <template slot-scope="scope">
                                <div style="display: flex;">
                                    <el-input placeholder="ip" v-model="scope.row.dst_url" style="flex:4;"></el-input>
                                    <el-input placeholder="port" v-model="scope.row.dst_port" style="flex:2"></el-input>
                                    <el-button size="small" @click="connectRtpServer(scope.$index, scope.row)">Connect</el-button>
                                </div>    
                            </template>
                        </el-table-column>
                        <el-table-column label="Operate">
                            <template slot-scope="scope">
                                <el-button size="mini" type="danger"
                                    @click="closeRtpServer(scope.$index, scope.row)">Delete</el-button>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>
                <div v-if="selectIndex==='7'">
                    <el-tabs tab-position="left" style="height: 100%;">
                        <el-tab-pane label="General settings">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="24" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                check_nvidia_dev
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.general.check_nvidia_dev" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Enable virtual hosting
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.general.enableVhost" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Server unique id
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.general.mediaServerId"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Enable FFMPEG logging
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.general.enable_ffmpeg_log" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>

                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Stream timeout time(ms)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.general.maxStreamWaitMS"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Merge write cache(ms)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.general.mergeWriteMS"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Disconnected and deleted
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.general.resetWhenRePlay" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Release timeout of unwatched stream(ms)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.general.streamNoneReaderDelayMS"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Not ready to cache frames
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.general.unready_frame_cache"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Adding stream timeout(ms)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.general.wait_add_track_ms"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Stream Ready Timeout(ms)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.general.wait_track_ready_ms"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                on_flow_report event threshold
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.general.flowThreshold"></el-input>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="FFMPEG settings">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                ffmpeg path
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.ffmpeg.bin"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Pull stream and push stream command template
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.ffmpeg.cmd"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Log path
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.ffmpeg.log"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Automatic restart time
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.ffmpeg.restart_sec"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Screenshot template
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.ffmpeg.snap"></el-input>
                                            </div>
                                        </div>
                                            </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="API Settings">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Debug
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.api.apiDebug" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Key
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.api.secret"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Screenshot path
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.api.snapRoot"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Default screenshot
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.api.defaultSnap"></el-input>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="Hook Settings">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Enable hook events
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.hook.enable" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item" v-if="serverConfig.hook.enable=='1'">
                                            <div class="conf_item_label">
                                                Alive heartbeat interval(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.hook.alive_interval"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item" v-if="serverConfig.hook.enable=='1'">
                                            <div class="conf_item_label">
                                                Hook request timeout(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.hook.timeoutSec"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item" v-if="serverConfig.hook.enable=='1'">
                                            <div class="conf_item_label">
                                                Retry times
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number" v-model="serverConfig.hook.retry"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item" v-if="serverConfig.hook.enable=='1'">
                                            <div class="conf_item_label">
                                                Failed to retry delay(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.hook.retry_delay"></el-input>
                                            </div>
                                        </div>

                                    </div>
                                </el-col>
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12"
                                    v-if="serverConfig.hook.enable=='1'">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Report on insurance activities
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_server_keepalive"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Traffic events
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_flow_report"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Http file authentication event
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_http_access"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Play authentication event
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.hook.on_play"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Promotion and authentication events
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.hook.on_publish"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Mp4 slice recording good events
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_record_mp4"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                TS slice recording good events
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_record_ts"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                RTP service timeout event
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_rtp_server_timeout"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                RTSP play authentication event
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_rtsp_auth"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                RTSP exclusive authentication event
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_rtsp_realm"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Send RTP passively close
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_send_rtp_stopped"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Service Start Event
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_server_started"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Service shutdown event
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_server_exited"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Telnet debug authentication event
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_shell_login"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Stream registration or cancellation event
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_stream_changed"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                No one watches streaming events
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_stream_none_reader"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Play stream event not found
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.hook.on_stream_not_found"></el-input>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="HLS settings">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Broadcast hls slice completion
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.hls.broadcastRecordTs" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Delete delay(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.hls.deleteDelaySec"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                File cache size
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.hls.fileBufSize"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Slice duration(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number" v-model="serverConfig.hls.segDur"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Number of slices
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number" v-model="serverConfig.hls.segNum"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Reserved number of slices
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number" v-model="serverConfig.hls.segRetain"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Keep hls file
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.hls.segKeep" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="Cluster settings">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Source site streaming url template
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.cluster.origin_url"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                The total timeout of traceability
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.cluster.timeout_sec"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Number of retry failed source traceability
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.cluster.retry_count"></el-input>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="HTTP">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.http.port"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                SSL port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.http.sslport"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Encoding
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.http.charSet" placeholder="Please select" style="width: 100%;">
                                                    <el-option label="UTF-8" value="utf-8"></el-option>
                                                    <el-option label="GB2312" value="gb2312"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Timeout
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.http.keepAliveSecond"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Maximum request size(byte)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.http.maxReqSize"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                404 web page content
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="textarea"
                                                    v-model="serverConfig.http.notFound"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Root directory
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.http.rootPath"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Send cache size
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.http.sendBufSize"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Disable the use of mmap cached file suffixes
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.http.forbidCacheSuffix"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                forwarded_ip_header
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.http.forwarded_ip_header"></el-input>
                                            </div>
                                        </div>

                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Show directory list
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.record.dirMenu" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Virtual path
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.http.virtualPath"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Allow cross-domain requests
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.record.allow_cross_domains" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                IP whitelist
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.http.allow_ip_range"></el-input>
                                            </div>
                                        </div>

                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="Protocol settings">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Turn on audio
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.enable_audio" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Add mute tracks
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.add_mute_audio" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                <el-tooltip effect="dark" placement="bottom-start">
                                                    <div slot="content">
                                                        After the push stream is disconnected, the push stream can be reconnected within the timeout time, so that the player will continue to play.
                                                        <br />Set 0 to turn off this feature(Pushing the stream disconnection will cause the player to be disconnected immediately)
                                                        <br />This parameter should not be greater than the player timeout time;Unit ms
                                                    </div>
                                                    <span>Continue to push the flow time(ms)</span>
                                                </el-tooltip>
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="number"
                                                    v-model="serverConfig.protocol.continue_push_ms"></el-input>
                                            </div>
                                        </div>

                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Use mp4 recording as a viewer
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.mp4_as_player" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                mp4 slice size(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.protocol.mp4_max_second"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                mp4 video saving path
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.protocol.mp4_save_path"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                hls video saving path
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.protocol.hls_save_path"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Turn on frame-level timestamp overlay
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.protocol.modify_stamp"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                When no one watches it, turn it off
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.auto_close" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Enable http-fmp4/ws-fmp4
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.enable_fmp4" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Enable hls
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.enable_hls" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Enable MP4 recording
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.enable_mp4" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Enable rtmp/flv
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.enable_rtmp" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Enable rtsp
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.enable_rtsp" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Enable http-ts/ws-ts
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.enable_ts" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Generate on demand http[s]-fmp4、ws[s]-fmp4
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.fmp4_demand" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Generate on demand hls
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.hls_demand" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Generate on demand rtmp[s]、http[s]-flv、ws[s]-flv
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.rtmp_demand" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Generate on demand rtsp[s]
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.rtsp_demand" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Generate on demand http[s]-ts
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.protocol.ts_demand" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>

                                            </div>
                                        </div>
                                    </div>
                                </el-col>

                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="Multicast settings">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Multicast udp ttl
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.multicast.udpTTL"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                rtp multicast start address
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.multicast.addrMin"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                rtp multicast deadline address
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.multicast.addrMax"></el-input>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>

                        <el-tab-pane label="RECORD">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                AppName
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.record.appName"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                FastStart
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.record.fastStart" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                File cache size
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.record.fileBufSize"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Save the path
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.record.filePath"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Loop play
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.record.fileRepeat" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                fileSecond
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.record.fileSecond"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                MP4 on demand streaming data volume per time
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.record.sampleMS"></el-input>
                                            </div>
                                        </div>


                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="RTC">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Public IP
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtc.externIP"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                UDP port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtc.port"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                TCP port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtc.tcpPort"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                rtc timeout
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtc.timeoutSec"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Remb bit rate
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtc.rembBitRate"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Audio candidate encoding
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtc.preferredCodecA"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Video candidate encoding
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtc.preferredCodecV"></el-input>
                                            </div>
                                        </div>
                                            </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="RTMP">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtmp.port"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                SSL port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtmp.sslport"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Handshake timeout
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtmp.handshakeSecond"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Heartbeat timeout(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtmp.keepAliveSecond"></el-input>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="RTSP">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtsp.port"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                SSL port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtsp.sslport"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Low latency mode
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.rtsp.lowLatency" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Heartbeat timeout(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtsp.keepAliveSecond"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Handshake timeout(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtsp.handshakeSecond"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Direct proxy mode
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.rtsp.directProxy" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                RTSP proprietary authentication
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtsp.authBasic"></el-input>
                                            </div>
                                        </div>

                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="RTP">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Audio mtu size
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp.audioMtuSize"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Video mtu size
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp.videoMtuSize"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Low delay switch
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.rtp.lowLatency" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                RTP packet length limit
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtp.rtpMaxSize"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Adopt stap-a mode
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.rtp.h264_stap_a" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>

                                    </div>
                                </el-col>
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Debug output directory(include rtp/ps/h264)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp_proxy.dumpDir"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                UDP and tcp proxy service ports
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtp_proxy.port"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Port range
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp_proxy.port_range"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Timeout
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp_proxy.timeoutSec"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Turn on gop cache optimization
                                            </div>
                                            <div class="conf_item_value">
                                                <el-select v-model="serverConfig.rtp_proxy.gop_cache" placeholder="Please select" style="width: 100%;">
                                                    <el-option v-for="(val,key) in yesNo" :label="val" :value="key"></el-option>
                                                </el-select>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                g711a load type
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp_proxy.g711a_pt"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                g711u load type
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp_proxy.g711u_pt"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                h264 load type
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp_proxy.h264_pt"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                h265 load type
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp_proxy.h265_pt"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                opus load type
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.rtp_proxy.opus_pt"></el-input>
                                            </div>
                                        </div>

                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                ps load type
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtp_proxy.ps_pt"></el-input>
                                            </div>
                                        </div>

                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                ts load type
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.rtp_proxy.ts_pt"></el-input>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>

                        <el-tab-pane label="SHELL">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.shell.port"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item" v-if="serverConfig.shell.port!='0'">
                                            <div class="conf_item_label">
                                                Maximum request size
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text"
                                                    v-model="serverConfig.shell.maxReqSize"></el-input>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="SRT">
                            <el-row :gutter="20">
                                <el-col :xs="24" :sm="24" :md="12" :lg="12" :xl="12">
                                    <div class="confs">
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Delay estimation parameters
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.srt.latencyMul"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Package cache size
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.srt.pktBufSize"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Port
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.srt.port"></el-input>
                                            </div>
                                        </div>
                                        <div class="conf_item">
                                            <div class="conf_item_label">
                                                Session timeout(s)
                                            </div>
                                            <div class="conf_item_value">
                                                <el-input type="text" v-model="serverConfig.srt.timeoutSec"></el-input>
                                            </div>
                                        </div>

                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                    </el-tabs>

                    <el-form ref="form" :model="serverConfig" label-width="180px">
                        <el-form-item>
                            <el-button type="primary" @click="onSubmit">Save updates</el-button>
                            <el-button>Cancel</el-button>
                        </el-form-item>
                    </el-form>
                </div>
            </el-main>
            <el-footer>
                <span>Branch:{{ versioninfo.branchName }}</span>
                <span>Build time: {{ versioninfo.buildTime }}</span>
                <span>Version: {{ versioninfo.commitHash }}</span>
            </el-footer>
        </el-container>
    </div>
</body>
<script src="./js/vue.min.js"></script>
<script src="./assets/elementui/index.js"></script>
<script src="./js/axios.min.js"></script>
<script src="./js/qs.js"></script>
<script src="./js/echarts.min.js"></script>
<script src="./js/ZLMRTCClient.js"></script>


<script>
    new Vue({
        el: '#app',
        beforeMount() {
            var urlParams = new URLSearchParams(window.location.search);

            var secret = urlParams.get('secret');
            console.log('Secret:', secret);
            if (secret) this.secret = secret;
            else this.secret = "";

            var host = urlParams.get('host');
            console.log('Host:', host);
            if (host) this.host = host;
            else this.host = "";

            if (this.secret) {
                //Get version and configuration information
                this.version();
                this.getServerConfig();
                this.getApiList();
            }

            //Get supported resolutions
            this.resolution_opt = []
            ZLMRTCClient.GetAllScanResolution().forEach((r, i) => {
                this.resolution_opt.push({
                    text: r.label + "(" + r.width + "x" + r.height + ")",
                    value: r
                })
            })
            this.webrtc.zlmsdpUrl = document.location.protocol + "//" + window.location.host + "/index/api/webrtc?app=live&stream=test&type=play"
        },
        mounted() {
            if (this.secret == "") {
                this.$message({
                    message: 'Add correct secret parameter in url path',
                    type: 'error'
                });
                return
            }
            else {
                this.updatetimer = setInterval(this.update_status, 1000)
            }
            this.chart1 = echarts.init(this.$refs.chart1);
            this.chart2 = echarts.init(this.$refs.chart2);
            this.chart3 = echarts.init(this.$refs.chart3);
            this.getMediaList();
            this.getAllSession();
        },
        data: function () {
            return {
                host: "",
                secret: "",
                selectIndex: '1',
                yesNo:{
                    0:'no',
                    1:'yes',
                },
                typeTcpMode:{
                    0:"none",
                    1:"passive",
                    2:"initiative"
                },
                typeOnlyTrack:{
                    0:"all",
                    1:"Audio only",
                    2:"Video only",
                },
                getMediaList_queryparams: {
                    schema: null,
                    vhost: "__defaultVhost__",
                    app: null,
                    stream: null
                },
                addStreamProxy_params: {
                    vhost: "__defaultVhost__",
                    app: "live",
                    stream: "test",
                    url: "",
                    retry_count: -1,
                    rtp_type: "0",
                    timeout_sec: 5,
                    enable_hls: false,
                    enable_hls_fmp4: false,
                    enable_mp4: false,
                    enable_rtsp: true,
                    enable_rtmp: true,
                    enable_ts: true,
                    enable_fmp4: true,
                    hls_demand: false,
                    rtsp_demand: false,
                    rtmp_demand: false,
                    ts_demand: false,
                    fmp4_demand: false,
                    enable_audio: true,
                    add_mute_audio: true,
                    mp4_save_path: "",
                    mp4_max_second: 10,
                    mp4_as_player: false,
                    hls_save_path: "",
                    modify_stamp: "",
                    auto_close: false
                },
                addStreamPusherProxy_params: {
                    vhost: "__defaultVhost__",
                    app: "live",
                    stream: "test",
                    schema: "rtsp",
                    dst_url: "",
                    retry_count: -1,
                    rtp_type: "0",
                    timeout_sec: 5,
                },
                versioninfo: {

                },
                updatetimer: null,
                autorefresh_medialist: false,
                autorefresh_session: false,
                serverConfig: null,
                serverConfig_bak: null,
                chart1: null,
                chart2: null,
                chart3: null,
                threadsLoad: [],
                workThreadsLoad: [],
                statistic: null,
                medialist: [],
                ffmpeglist: [],
                addFFmpeg_param: {
                    src_url: "",
                    dst_url: "",
                    ffmpeg_cmd_key: "ffmpeg.cmd",
                    timeout_ms: 10000,
                    enable_hls: false,
                    enable_mp4: false,
                },
                rtpserverlist: [],
                addRtpServer_param:{
                    vhost: "__defaultVhost__",
                    app: "rtp",
                    stream_id: "test",
                    tcp_mode: "1",
                    only_track: "0",
                    local_ip: '',
                    re_use_port: true,
                    port: 0,
                    ssrc: 0,
                },
                pusherProxyList: [],
                streamProxyList: [],
                playerlist: [],
                playerTitle: "PlayerList",
                showPlayerDialog: false,
                sessionlist: [],
                schemaFilters:[
                    {text:'rtsp', value: 'rtsp'},
                    {text:'rtmp', value: 'rtmp'},
                    {text:'ts', value: 'ts'},
                    {text:'hls', value: 'hls'},
                    {text:'fmp4', value: 'fmp4'},
                ],
                webrtc: {
                    debug: true,
                    zlmsdpUrl: "",
                    type: "play",
                    recvOnly: true,
                    resolution: "",
                    usedatachannel: false,
                    simulcast: false,
                    useCamera: true,
                    audioEnable: true,
                    videoEnable: true,
                    msgsend: "",
                    msgrecv: "",
                },
                resolution_opt: [],
                webrtc_player: null,
                getAllSession_queryparams: {
                    local_port: null,
                    peer_ip: null
                }
            }
        },
        filters: {
            bitsSpeed: function (val) {
                return byteString(val * 8);
            },
            msFormat: function(val) {
                var time = new Date(val);
                return time.toLocaleString();
            },
            secFormat: function(val) {
                var time = new Date(val * 1000);
                return time.toLocaleString();
            }
        },

        computed: {
            apiurl: function () {
                const qs_str = Qs.stringify(this.addStreamProxy_params, {
                    filter: (key, value) => {
                        if (value === "" || value === null || value === undefined) {
                            return undefined; // Returning undefined will exclude this property
                        }
                        return value;
                    }
                })
                console.log(qs_str)
                return `/index/api/addStreamProxy?secret=${this.secret}&${qs_str}`
            },
            addStreamPusherProxy_apiurl: function () {
                const qs_str = Qs.stringify(this.addStreamPusherProxy_params, {
                    filter: (key, value) => {
                        if (value === "" || value === null || value === undefined) {
                            return undefined; // Returning undefined will exclude this property
                        }
                        return value;
                    }
                })
                console.log(qs_str)
                return `/index/api/addStreamPusherProxy?secret=${this.secret}&${qs_str}`
            },
            addFFmpegSource_apiurl: function () {
                const qs_str = Qs.stringify(this.addFFmpeg_param, {
                    filter: (key, value) => {
                        if (value === "" || value === null || value === undefined) {
                            return undefined; // Returning undefined will exclude this property
                        }
                        return value;
                    }
                })
                console.log(qs_str)
                return `/index/api/addFFmpegSource?secret=${this.secret}&${qs_str}`
            },
        },
        watch: {
            'webrtc.type'(newv, oldv) {
                var url = new URL(this.webrtc.zlmsdpUrl)
                url.searchParams.set("type", newv)
                this.webrtc.zlmsdpUrl = url.toString()
                if (newv == "play") {
                    this.webrtc.recvOnly = true;
                } else if (newv == "echo") {
                    this.webrtc.recvOnly = false;
                } else {
                    this.webrtc.recvOnly = false;
                }
            }
        },

        methods: {
            filterSchema(value, row) {
                return row.schema === value;
            },
            startwebrtc() {
                if (this.webrtc.resolution == "") {
                    this.$message({
                        message: 'Please set resolution',
                        type: 'warning'
                    });
                    return
                }
                this.webrtc_player = new ZLMRTCClient.Endpoint(
                    {
                        element: this.$refs.video,// video tag
                        debug: this.webrtc.debug,// Whether to print a log
                        zlmsdpUrl: this.webrtc.zlmsdpUrl,//Stream address
                        simulcast: this.webrtc.simulcast,
                        useCamera: this.webrtc.useCamera,
                        audioEnable: this.webrtc.audioEnable,
                        videoEnable: this.webrtc.videoEnable,
                        recvOnly: this.webrtc.recvOnly,
                        resolution: {
                            w: this.resolution_opt[this.webrtc.resolution].value.width,
                            h: this.resolution_opt[this.webrtc.resolution].value.height
                        },
                        usedatachannel: this.webrtc.usedatachannel,
                    });
                this.webrtc_player.on(ZLMRTCClient.Events.WEBRTC_ICE_CANDIDATE_ERROR, (e) => {// ICE negotiation error
                    console.log('ICE negotiation error')
                    this.$message({
                        message: 'ICE negotiation error',
                        type: 'warning'
                    });
                });

                this.webrtc_player.on(ZLMRTCClient.Events.WEBRTC_ON_REMOTE_STREAMS, (e) => {//Remote stream has been obtained and can be played
                    this.$message({
                        message: 'Play successfully',
                        type: 'success'
                    });
                    console.log('Play successfully', e.streams)
                });

                this.webrtc_player.on(ZLMRTCClient.Events.WEBRTC_OFFER_ANWSER_EXCHANGE_FAILED, (e) => {// offer anwser exchange failed
                    console.log('Offer anwser exchange failed', e)
                    this.$message({
                        message: `Offer anwser exchange failed:${e.msg}`,
                        type: 'error'
                    });
                    this.stopwebrtc();
                });

                this.webrtc_player.on(ZLMRTCClient.Events.WEBRTC_ON_LOCAL_STREAM, (s) => {// Get local stream
                    this.$refs.selfVideo.srcObject = s;
                    this.$refs.selfVideo.muted = true;

                });

                this.webrtc_player.on(ZLMRTCClient.Events.CAPTURE_STREAM_FAILED, (s) => {// Failed to get local churn
                    this.$message({
                        message: 'Failed to get local churn',
                        type: 'error'
                    });
                    console.log('Failed to get local churn')
                });

                this.webrtc_player.on(ZLMRTCClient.Events.WEBRTC_ON_CONNECTION_STATE_CHANGE, (state) => {// RTC Status changes, please refer to details https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/connectionState
                    console.log('Current status==>', state)
                });

                this.webrtc_player.on(ZLMRTCClient.Events.WEBRTC_ON_DATA_CHANNEL_OPEN, (event) => {
                    console.log('rtc datachannel open:', event)
                    this.$message({
                        message: 'rtc datachannel open',
                        type: 'info'
                    });
                });

                this.webrtc_player.on(ZLMRTCClient.Events.WEBRTC_ON_DATA_CHANNEL_MSG, (event) => {
                    console.log('rtc datachannel message :', event.data)
                    this.webrtc.msgrecv = event.data
                });
                this.webrtc_player.on(ZLMRTCClient.Events.WEBRTC_ON_DATA_CHANNEL_ERR, (event) => {
                    console.log('rtc datachannel mistake :', event)
                    this.$message({
                        message: 'rtc datachannel mistake ',
                        type: 'error'
                    });
                });
                this.webrtc_player.on(ZLMRTCClient.Events.WEBRTC_ON_DATA_CHANNEL_CLOSE, (event) => {
                    console.log('rtc datachannel close :', event)
                    this.$message({
                        message: 'rtc datachannel close ',
                        type: 'warning'
                    });
                });
            },
            stopwebrtc() {
                if (this.webrtc_player) {
                    this.webrtc_player.close();
                    this.webrtc_player = null;
                if (this.$refs.video) {
                    this.$refs.video.srcObject = null;
                    this.$refs.video.load();
                }
                this.$refs.selfVideo.srcObject = null;
                this.$refs.selfVideo.load();
                }
            },
            sendata() {
                console.log(`Send data:${this.webrtc.msgsend}`)
                if (this.webrtc_player) {
                    this.webrtc_player.sendMsg(this.webrtc.msgsend)
                }
            },
            closedata() {
                console.log(`Close the data channel`)
                if (this.webrtc_player) {
                    this.webrtc_player.closeDataChannel()
                    this.$message({
                        message: 'Close the data channel',
                        type: 'success'
                    });
                }
            },

            onSubmit() {
                this.setServerConfig()
            },

            handleSelect(key, keyPath) {
                if (this.updatetimer) {
                    clearInterval(this.updatetimer);
                    this.updatetimer = null;
                }
                if (key) this.selectIndex = key;
                if (this.selectIndex == '7') {
                    this.getServerConfig();
                }
                else if (this.selectIndex == '3') {
                    this.listStreamProxy();
                }
                else if (this.selectIndex == '4') {
                    this.listStreamPusherProxy();
                }
                else if (this.selectIndex == '5') {
                    this.listFFmpegSource();
                }
                else if (this.selectIndex == '6') {
                    this.listRtpServer();
                }
                else if (this.selectIndex == '2') {
                    var ishttps = 'https:' == document.location.protocol ? true : false
                    var isLocal = ("file:" == document.location.protocol) || (document.location.host == "127.0.0.1")  || (document.location.host == "localhost");
                    if (!ishttps && !isLocal) {
                        this.$message({
                            message: 'This demo must access in site of https if you want push stream',
                            type: 'warning'
                        });
                    }
                }
                else if (this.selectIndex == '1') {
                    this.chart1 = echarts.init(this.$refs.chart1);
                    this.chart2 = echarts.init(this.$refs.chart2);
                    this.chart3 = echarts.init(this.$refs.chart3);
                    this.updatetimer = setInterval(this.update_status, 1000)
                }
                console.log(key, keyPath);
            },
            async performRequest(url, successMessage, errorMessage, callback) {
                try {
                    const response = await axios.get(url);
                    if (response.status === 200) {
                        if (response.data.code === 0) {
                            if (successMessage) {
                                this.$message({
                                    message: successMessage,
                                    type: 'success',
                                });
                            }
                            if (callback) {
                                callback(response);
                            }
                        } else {
                            this.$message({
                                message: errorMessage || response.data.msg,
                                type: 'error',
                            });
                        }
                    }
                    else {
                        this.$message({
                            message: `response.status:${response.status}`,
                            type: 'error',
                        });

                    }
                } catch (err) {
                    // Error handling code
                }
            },
            addStreamProxy() {
                const url = `${this.host}${this.apiurl}`;
                this.performRequest(url, 'Added successfully!', '', () => this.listStreamProxy());
            },
            addStreamPusherProxy() {
                const url = `${this.host}${this.addStreamPusherProxy_apiurl}`;
                this.performRequest(url, 'Added successfully!', '', () => this.listStreamPusherProxy());
            },
            delStreamProxy(index, row) {
                console.log(index, row);
                const url = `${this.host}/index/api/delStreamProxy?secret=${this.secret}&key=${row.key}`;
                this.performRequest(url, 'Delete successfully!', '', () => this.listStreamProxy());
            },
            delStreamPusherProxy(index, row) {
                console.log(index, row);
                const url = `${this.host}/index/api/delStreamPusherProxy?secret=${this.secret}&key=${row.key}`;
                this.performRequest(url, 'Delete successfully!', '', () => this.listStreamPusherProxy());
            },
            listStreamProxy() {
                const url = `${this.host}/index/api/listStreamProxy?secret=${this.secret}`;
                this.performRequest(url, "", "", resp => {
                    if (resp.data.data) this.streamProxyList = resp.data.data;
                    else this.streamProxyList = [];
                })
            },
            listStreamPusherProxy() {
                const url = `${this.host}/index/api/listStreamPusherProxy?secret=${this.secret}`;
                this.performRequest(url, "", "", resp => {
                    if (resp.data.data) this.pusherProxyList = resp.data.data;
                    else this.pusherProxyList = [];
                })
            },

            close_stream(index, row) {
                console.log(index, row);
                const data = {
                    secret: this.secret,
                    schema: row.schema,
                    vhost: row.vhost,
                    app: row.app,
                    stream: row.stream,
                    force: true
                }
                const url = `${this.host}/index/api/close_streams?${Qs.stringify(data)}`;
                this.performRequest(url, 'Close successfully!', '', () => this.getMediaList());
            },

            kick_session(id) {
                const url = `${this.host}/index/api/kick_session?secret=${this.secret}&id=${id}`;
                this.performRequest(url, 'Close successfully!', '', () => this.getAllSession());
            },

            getApiList() {
                const url = `${this.host}/index/api/getApiList?secret=${this.secret}`;
                this.performRequest(url, '', '', (response) => {
                    console.log(response.data.data);
                });
            },
            getPlayerList(row) {
                const url = `${this.host}/index/api/getMediaPlayerList?secret=${this.secret}&schema=${row.schema}&vhost=${row.vhost}&app=${row.app}&stream=${row.stream}`;
                console.log(url);
                this.performRequest(url, '', '', (resp) => {
                    console.log(resp.data.data);
                    if (resp.data.data) this.playerlist = resp.data.data;
                    else this.playerlist = [];
                    if (this.playerlist.length) {
                        this.playerTitle = `${row.app}\\${row.stream}’s PlayerList`;
                        this.showPlayerDialog = true;
                    }
                });
            },
            getServerConfig() {
                const url = `${this.host}/index/api/getServerConfig?secret=${this.secret}`;
                this.performRequest(url, '', '', (response) => {
                    var data = {}
                    var serverConfig = response.data.data[0]
                    console.log(serverConfig);
                    const serverConfigKeys = Object.keys(serverConfig);
                    for (const key of serverConfigKeys) {
                        const [category, subKey] = key.split('.');
                        if (!data[category]) {
                            data[category] = {};
                        }
                        data[category][subKey] = serverConfig[key];
                    }
                    this.serverConfig = data;
                    this.serverConfig_bak = JSON.parse(JSON.stringify(data));
                });
            },

            setServerConfig() {
                var confs = findDifferentProperties(this.serverConfig_bak, this.serverConfig)
                console.log(confs)
                const flattened = flattenObject(confs);
                const queryString = Object.keys(flattened).map(key => `${key}=${flattened[key]}`).join('&');
                if (queryString == "") {
                    this.$message({
                        message: 'No parameters were modified',
                        type: 'info'
                    });
                    return
                }
                const update_counts = ((queryString.match(/&/g) || []).length + 1)

                const postdata = { ...{ secret: this.secret }, ...flattened }
                axios.post(`${this.host}/index/api/setServerConfig`, postdata).then(resp => {
                    if (resp.status == 200) {
                        if (resp.data.code === 0) {
                            if (update_counts == resp.data.changed) {
                                this.$message({
                                    message: `Save successfully! Modify ${resp.data.changed} parameters`,
                                    type: 'success'
                                });
                            }
                            else {
                                this.$message({
                                    message: `There is a failed parameter modification, and a total of modifications are ${resp.data.changed}. Please check the parameters and try again！`,
                                    type: 'error'
                                });
                            }
                            this.getServerConfig()
                        }
                    }
                }).catch(err => {
                    console.log(err)
                })
            },

            getThreadsLoad() {
                const url = `${this.host}/index/api/getThreadsLoad?secret=${this.secret}`;
                this.performRequest(url, "", "", resp => {
                    this.threadsLoad = resp.data.data;
                    var delays = this.threadsLoad.map(item => item.delay);
                    var loads = this.threadsLoad.map(item => item.load);
                    var max_delay = Math.max(...delays);
                    var y_max = max_delay>100?max_delay*1.2:100;
                    
                    this.chart3.setOption({
                        title: {
                            text: 'ThreadsLoad'
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                            type: 'cross',
                            crossStyle: {
                                color: '#999'
                            }
                            }
                        },
                        legend: {
                            data: ['Delay', 'Load']
                        },
                        xAxis: [
                            {
                            type: 'category',
                            data: Array.from({ length: this.threadsLoad.length }, (_, i) => i + 1),
                            axisPointer: {
                                type: 'shadow'
                            }
                            }
                        ],
                        yAxis: [
                            {
                            type: 'value',
                            name: 'Delay',
                            min: 0,
                            max: y_max,
                            axisLabel: {
                                formatter: '{value} ms'
                            }
                            },
                            {
                            type: 'value',
                            name: 'Load',
                            min: 0,
                            max: 100,
                            axisLabel: {
                                formatter: '{value} %'
                            }
                            }
                        ],
                        series: [
                            {
                            name: 'Delay',
                            type: 'line',
                            tooltip: {
                                valueFormatter: function (value) {
                                return value + ' ms';
                                }
                            },
                            data: delays
                            },
                            {
                            name: 'Load',
                            type: 'bar',
                            yAxisIndex: 1,
                            tooltip: {
                                valueFormatter: function (value) {
                                return value + ' %';
                                }
                            },
                            data: loads
                            }
                        ]
                    })
                })
            },

            getWorkThreadsLoad() {
                const url = `${this.host}/index/api/getWorkThreadsLoad?secret=${this.secret}`;
                this.performRequest(url, "", "", resp => {
                    this.workThreadsLoad = resp.data.data;
                    var delays = this.workThreadsLoad.map(item => item.delay);
                    var loads = this.workThreadsLoad.map(item => item.load);
                    var max_delay = Math.max(delays);
                    var y_max = max_delay>100?max_delay:100;
                    this.chart2.setOption({
                        title: {
                            text: 'WorkThreadsLoad'
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                            type: 'cross',
                            crossStyle: {
                                color: '#999'
                            }
                            }
                        },
                        legend: {
                            data: ['Delay', 'Load']
                        },
                        xAxis: [
                            {
                            type: 'category',
                            data: Array.from({ length: this.workThreadsLoad.length }, (_, i) => i + 1),
                            axisPointer: {
                                type: 'shadow'
                            }
                            }
                        ],
                        yAxis: [
                            {
                            type: 'value',
                            name: 'Delay',
                            min: 0,
                            max: y_max,
                            axisLabel: {
                                formatter: '{value} ms'
                            }
                            },
                            {
                            type: 'value',
                            name: 'Load',
                            min: 0,
                            max: 100,
                            axisLabel: {
                                formatter: '{value} %'
                            }
                            }
                        ],
                        series: [
                            {
                            name: 'Delay',
                            type: 'line',
                            tooltip: {
                                valueFormatter: function (value) {
                                return value + ' ms';
                                }
                            },
                            data: delays
                            },
                            {
                            name: 'Load',
                            type: 'bar',
                            yAxisIndex: 1,
                            tooltip: {
                                valueFormatter: function (value) {
                                return value + ' %';
                                }
                            },
                            data: loads
                            }
                        ]
                    })
                })
            },

            getStatistic() {
                const url = `${this.host}/index/api/getStatistic?secret=${this.secret}`;
                this.performRequest(url, "", "", resp => {
                    this.statistic = resp.data.data;
                    this.chart1.setOption({
                        title: {
                            text: 'Statistic'
                        },
                        tooltip: {},
                        legend: {},
                        xAxis: {
                            data: Object.keys(this.statistic),
                            axisLabel: {
                                rotate: 45 // Set the rotation angle of the X-axis scale label to 45 degrees
                            }
                        },
                        yAxis: {},
                        series: [{
                            type: 'bar',
                            data: Object.values(this.statistic)
                        }]
                    })
                })
            },
            restartServer() {
                const url = `${this.host}/index/api/restartServer?secret=${this.secret}`;
                this.performRequest(url, "", "", resp => {
                    this.$message({
                        message: "The server will restart in one second",
                        type: 'success'
                    });
                })
            },
            version() {
                const url = `${this.host}/index/api/version?secret=${this.secret}`;
                this.performRequest(url, "", "", resp => {
                    this.versioninfo = resp.data.data;
                    console.log(this.versioninfo)
                })
            },

            getMediaList() {
                const url = `${this.host}/index/api/getMediaList?secret=${this.secret}&` + Qs.stringify(this.getMediaList_queryparams);
                this.performRequest(url, "", "", resp => {
                    if (resp.data.data) this.medialist = resp.data.data;
                    else this.medialist = [];
                })
            },
            listRtpServer() {
                const url = `${this.host}/index/api/listRtpServer?secret=${this.secret}`;
                this.performRequest(url, "", "", resp => {
                    if (resp.data.data) this.rtpserverlist = resp.data.data;
                    else this.rtpserverlist = [];
                })
            },
            openRtpServer() {
                const url = `${this.host}/index/api/openRtpServer?secret=${this.secret}&` + Qs.stringify(this.addRtpServer_param);
                this.performRequest(url, 'Added successfully!', '', () => this.listRtpServer());
            },
            closeRtpServer(index, row) {
                console.log(index, row);
                const url = `${this.host}/index/api/closeRtpServer?secret=${this.secret}&stream_id=${row.stream_id}&vhost=${row.vhost}&app=${row.app}`;
                this.performRequest(url, 'Delete successfully!', '', () => this.listRtpServer());
            },
            connectRtpServer(index, row) {
                console.log(index, row);
                const url = `${this.host}/index/api/connectRtpServer?secret=${this.secret}&stream_id=${row.stream_id}&vhost=${row.vhost}&app=${row.app}&dst_url=${row.dst_url}&dst_port=${row.dst_port}`;
                console.log(url);
                this.performRequest(url, 'Connection successfully!', '', () => this.listRtpServer());
            },
            updateRtpServerSSRC(row) {
                const url = `${this.host}/index/api/updateRtpServerSSRC?secret=${this.secret}&stream_id=${row.stream_id}&vhost=${row.vhost}&app=${row.app}&ssrc=${row.ssrc}`;                
                console.log(url);
                this.performRequest(url, 'Update successfully!', '', () => this.listRtpServer());
            },
            
            listFFmpegSource() {
                const url = `${this.host}/index/api/listFFmpegSource?secret=${this.secret}`;
                this.performRequest(url, "", "", resp => {
                    if (resp.data.data) this.ffmpeglist = resp.data.data;
                    else this.ffmpeglist = [];
                })
            },
            delFFmpegSource(index, row) {
                console.log(index, row);
                const url = `${this.host}/index/api/delFFmpegSource?secret=${this.secret}&key=${row.key}`;
                this.performRequest(url, 'Delete successfully!', '', () => this.listFFmpegSource());
            },
            addFFmpegSource() {
                const url = `${this.host}${this.addFFmpegSource_apiurl}`;
                this.performRequest(url, 'Added successfully!', '', () => this.listFFmpegSource());
            },
            getAllSession() {
                const url = `${this.host}/index/api/getAllSession?secret=${this.secret}&` + Qs.stringify(this.getAllSession_queryparams);
                this.performRequest(url, "", "", resp => {
                    this.sessionlist = resp.data.data;
                })
            },

            update_status() {
                this.getThreadsLoad();
                this.getWorkThreadsLoad();
                this.getStatistic();
                if (this.autorefresh_medialist)
                    this.getMediaList();
                if (this.autorefresh_session)
                    this.getAllSession();
            },
        },
    })
</script>
<style>
    .el-header,
    .el-footer {
        background-color: #545c64;
        color: #333;
        text-align: center;
        line-height: 60px;
    }

    .el-main {
        background-color: #E9EEF3;
        color: #333;
        text-align: center;
        /* line-height: 260px; */
    }

    body>.el-container {
        margin-bottom: 40px;
    }

    .videobox {
        width: 100%;
        height: 100%;
    }

    .confs {
        min-height: 50px;
        border-radius: 4px;
        background-color: #545c6421;
        margin-bottom: 20px;
        display: flex;
        flex-direction: column;
    }


    .confs>.conf_item {
        margin: 10px;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        line-height: 2em;
    }

    .confs>.conf_item>.conf_item_label {}

    .confs>.conf_item>.conf_item_value {
        width: 70%;
    }
    .input-with-select .el-input-group__prepend {
       background-color: var(--el-fill-color-blank);
    }
</style>

</html>